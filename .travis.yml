branches:
 only:
  - develop
  - master

git:
 depth: 1

language: c

env:
 global:
  - EnableNuGetPackageRestore=true

before_install:
 - sudo add-apt-repository "deb http://download.mono-project.com/repo/debian wheezy main"
 - sudo apt-get update
 - sudo apt-get install mono-devel --force-yes
 - sudo mozroots --import --sync
 - yes | sudo certmgr -ssl https://go.microsoft.com
 - yes | sudo certmgr -ssl https://nugetgallery.blob.core.windows.net
 - yes | sudo certmgr -ssl https://nuget.org

before_script:
 - chmod +x .ci/nunit.sh

script:
 - xbuild /p:Platform="Any CPU" /p:Configuration=Release src/AcspNet.sln
 - .ci/nunit.sh .ci/tests.nunit
